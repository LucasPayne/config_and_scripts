#------------------------------------------------------------
# Remote control

allow_remote_control yes
listen_on unix:@kitty1

#------------------------------------------------------------
# Shell integration

# The cursor shell integration changes to bar when the cursor is inside
# the prompt delimited by OSC 133 codes.
# This apparently does not play nicely with readline.
#    https://github.com/kovidgoyal/kitty/issues/5083
# TODO: Still apparently doesn't work.
shell_integration no-cursor

#------------------------------------------------------------
# Style

hide_window_decorations yes

# Possible values:
#     top-left, top, top-right, left, center, right, bottom-left, bottom, bottom-right
placement_strategy top-left

dynamic_background_opacity yes
background_opacity 0.72
background_blur 0
# TODO: Make block cursor transparent.
# transparent_background_colors #d8a95f@0.3

# Cursor
cursor_beam_thickness 4.5
# cursor #e2bbef
# cursor            #9881db
# cursor            #ed00ff
# cursor_text_color #000000
cursor_trail 0
# cursor_trail_color #df9cdf
# Cursor blink interval
#    0: Disable
#    -1: Use system default
#    positive: 
cursor_blink_interval 0

# https://sw.kovidgoyal.net/kitty/conf/#opt-kitty.text_composition_strategy
# <arg1>: Gamma adjustment. (Linux default: 1.0)
# <arg2>: Multiplicative contrast. (Linux default: 0)
# Use thin text appearance.
text_composition_strategy 0.01 0
# Thicker, looks better over cell background.
# text_composition_strategy 1 0

# Bell
enable_audio_bell no
visual_bell_duration 0.5 linear
# visual_bell_color #000000
# Custom sound for bell.
# command_on_bell d mpv ~/config/sounds/dialup.mp3
# bell_path ~/config/sounds/dialup.mp3

# Tabs
tab_bar_style slant
# active_tab_foreground   #999
# active_tab_background   #122
active_tab_font_style   bold-italic
# inactive_tab_foreground #666
# inactive_tab_background #111
inactive_tab_font_style normal

#------------------------------
# Performance
# https://sw.kovidgoyal.net/kitty/conf/#performance-tuning

repaint_delay 10
sync_to_monitor no

#------------------------------
# Color

# Arthur theme
# https://github.com/dexpota/kitty-themes/blob/master/themes/Arthur.conf
# background #1c1c1c
# background #000000
# foreground #c8c8c8
# selection_background #4d4d4d
# color0  #3d352a
# Modified: Match background color for opacity.
# color0  #000000
# color8  #554444
# color1  #cd5c5c
# color9  #cc5533
# color2  #86af80
# color10 #88aa22
# color3  #e8ae5b
# color11 #ffa75d
# color4  #6495ed
# color12 #87ceeb
# color5  #deb887
# color13 #996600
# color6  #b0c4de
# color14 #b0c4de
# color7  #bbaa99
# color7  #A9A9A9
# color7  #C2C2C2
# color7  #000000
# color7  #bbbbbb
# color7  #eeeeee
# color15 #ddccbb
# selection_foreground #1c1c1c

# background        #000000
# foreground        #d8a95f
# 
# cursor            #9881db
# cursor_text_color #000000
# 
# selection_foreground #000000
# selection_background #e5c48b
# 
# color0  #000000
# color8  #2a2418
# 
# color1  #a0652f
# color9  #d28b4f
# 
# color2  #a07d2f
# color10 #d7bc4f
# 
# color3  #b38a3a
# color11 #ecc86a
# 
# color4  #916c37
# color12 #cfa764
# 
# color5  #b47a46
# color13 #e9b77a
# 
# color6  #aa874a
# color14 #e4c38d
# 
# color7  #d8a95f
# color15 #f3dcb1

#------------------------------------------------------------
# Mappings

kitty_mod ctrl+shift

map kitty_mod+. load_config_file

# Scrollback
map kitty_mod+k combine : scroll_line_up : scroll_line_up
map kitty_mod+j combine : scroll_line_down : scroll_line_down
# map kitty_mod+alt+k scroll_page_up
# map kitty_mod+alt+j scroll_page_down

# Style
map kitty_mod+up set_background_opacity +0.1
map kitty_mod+down set_background_opacity -0.1
map kitty_mod+left set_background_opacity 0
map kitty_mod+right set_background_opacity 1

# Shell integration
map kitty_mod+alt+k scroll_to_prompt -1
map kitty_mod+alt+j scroll_to_prompt 1
map kitty_mod+g show_last_visited_command_output

# Kittens
# map kitty_mod+; kitten kittens/text_expansion.py
# map kitty_mod+p kitten choose-files

# map kitty_mod+e launch --title "lf" --type=overlay screen -d -RR lf lf
map kitty_mod+e launch --title "scrollback overlay" --stdin-source=@screen_scrollback --type=overlay less

# Switch to tabs with kitty_mod+#N.
# (Changed from the default of targeting windows.)
map kitty_mod+1 goto_tab 1
map kitty_mod+2 goto_tab 2
map kitty_mod+3 goto_tab 3
map kitty_mod+4 goto_tab 4
map kitty_mod+5 goto_tab 5
map kitty_mod+6 goto_tab 6
map kitty_mod+7 goto_tab 7
map kitty_mod+8 goto_tab 8
map kitty_mod+9 goto_tab 9

# Navigation
map kitty_mod+j neighboring_window down
map kitty_mod+k neighboring_window up
# TODO: Navigate across tabs if there is no window to left or right..
# map kitty_mod+l neighboring_window left
# map kitty_mod+; neighboring_window right
map kitty_mod+l previous_tab
map kitty_mod+; next_tab
map kitty_mod+alt+j move_window down
map kitty_mod+alt+k move_window up
map kitty_mod+alt+l move_window left
map kitty_mod+alt+; move_window right

# Resizing
map --new-mode resize kitty_mod+r
map --mode resize l resize_window narrower
map --mode resize ; resize_window wider
map --mode resize j resize_window shorter
map --mode resize k resize_window taller
map --mode resize kitty_mod+j neighboring_window down
map --mode resize kitty_mod+k neighboring_window up
map --mode resize kitty_mod+l neighboring_window left
map --mode resize kitty_mod+; neighboring_window right
map --mode resize i pop_keyboard_mode

#------------------------------------------------------------
# Fonts

# Saved fonts (use +list-fonts to generate font config at end of this file.)
# Inconsolata
#    Nice
# Px Verite
#    Reminds me of Bisqwit
#        Is there a thinner version? Change gamma?
# Px CompaqThin 8x16
#    Thin blocky serif
# FreeMono
#    Cleaner thin serif
#
# To disable bold,
# specify bold_font style="Regular".

# Saved themes
# Gruvbox Light Hard

font_size 22.0

#------------------------------------------------------------
#============================================================
# Auto-generated config

# Run
#     kitty +kitten choose_fonts
# to change fonts and re-generate this config section.
# BEGIN_KITTY_FONTS
font_family      family="Px CompaqThin 8x16"
bold_font        auto
italic_font      auto
bold_italic_font auto
# END_KITTY_FONTS


# BEGIN_KITTY_THEME
# Gruvbox Light Hard
include current-theme.conf
# END_KITTY_THEME
cursor            #d700cc
cursor_text_color            #FFFFFF
